{"ast":null,"code":"import React, { useState, useEffect, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport { throttle } from 'lodash';\nconst ScrollReveal = React.forwardRef((props, ref) => {\n  const [viewportHeight, setViewportheight] = useState(window.innerHeight);\n  const [revealEl, setRevealel] = useState([]);\n\n  const checkComplete = () => {\n    return revealEl.length <= document.querySelectorAll('[class*=reveal-].is-revealed').length;\n  };\n\n  const elementIsVisible = (el, offset) => {\n    return el.getBoundingClientRect().top <= viewportHeight - offset;\n  };\n\n  const revealElements = () => {\n    if (checkComplete()) return;\n\n    for (let i = 0; i < revealEl.length; i++) {\n      let el = revealEl[i];\n      let revealDelay = el.getAttribute('data-reveal-delay');\n      let revealOffset = el.getAttribute('data-reveal-offset') ? el.getAttribute('data-reveal-offset') : '200';\n      let listenedEl = el.getAttribute('data-reveal-container') ? el.closest(el.getAttribute('data-reveal-container')) : el;\n\n      if (elementIsVisible(listenedEl, revealOffset) && !el.classList.contains('is-revealed')) {\n        if (revealDelay && revealDelay !== 0) {\n          setTimeout(function () {\n            el.classList.add('is-revealed');\n          }, revealDelay);\n        } else {\n          el.classList.add('is-revealed');\n        }\n      }\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    init() {\n      setRevealel(document.querySelectorAll('[class*=reveal-]'));\n    }\n\n  }));\n  useEffect(() => {\n    if (typeof revealEl !== 'undefined' && revealEl.length > 0) {\n      if (!checkComplete()) {\n        window.addEventListener('scroll', handleScroll);\n        window.addEventListener('resize', handleResize);\n      }\n\n      revealElements();\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [revealEl]);\n\n  const handleListeners = () => {\n    if (!checkComplete()) return;\n    window.removeEventListener('scroll', handleScroll);\n    window.removeEventListener('resize', handleResize);\n  };\n\n  const handleScroll = throttle(() => {\n    handleListeners();\n    revealElements();\n  }, 30);\n  const handleResize = throttle(() => {\n    setViewportheight(window.innerHeight);\n  }, 30);\n  useEffect(() => {\n    handleListeners();\n    revealElements(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewportHeight]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, props.children());\n});\nScrollReveal.propTypes = {\n  children: PropTypes.func.isRequired\n};\nexport default ScrollReveal;","map":{"version":3,"names":["React","useState","useEffect","useImperativeHandle","PropTypes","throttle","ScrollReveal","forwardRef","props","ref","viewportHeight","setViewportheight","window","innerHeight","revealEl","setRevealel","checkComplete","length","document","querySelectorAll","elementIsVisible","el","offset","getBoundingClientRect","top","revealElements","i","revealDelay","getAttribute","revealOffset","listenedEl","closest","classList","contains","setTimeout","add","init","addEventListener","handleScroll","handleResize","handleListeners","removeEventListener","children","propTypes","func","isRequired"],"sources":["/home/producao/Documentos/open-react-template-master/src/utils/ScrollReveal.js"],"sourcesContent":["import React, { useState, useEffect, useImperativeHandle } from 'react';\nimport PropTypes from 'prop-types';\nimport { throttle } from 'lodash';\n\nconst ScrollReveal = React.forwardRef((props, ref) => {\n\n  const [viewportHeight, setViewportheight] = useState(window.innerHeight); \n  const [revealEl, setRevealel] = useState([]);\n\n  const checkComplete = () => {\n    return revealEl.length <= document.querySelectorAll('[class*=reveal-].is-revealed').length;\n  };\n\n  const elementIsVisible = (el, offset) => {\n    return (el.getBoundingClientRect().top <= viewportHeight - offset);\n  };\n\n  const revealElements = () => {\n    if (checkComplete()) return;\n    for (let i = 0; i < revealEl.length; i++) {\n      let el = revealEl[i];\n      let revealDelay = el.getAttribute('data-reveal-delay');\n      let revealOffset = (el.getAttribute('data-reveal-offset') ? el.getAttribute('data-reveal-offset') : '200');\n      let listenedEl = (el.getAttribute('data-reveal-container') ? el.closest(el.getAttribute('data-reveal-container')) : el);\n      if (elementIsVisible(listenedEl, revealOffset) && !el.classList.contains('is-revealed')) {\n        if (revealDelay && revealDelay !== 0) {\n          setTimeout(function () {\n            el.classList.add('is-revealed');\n          }, revealDelay);\n        } else {\n          el.classList.add('is-revealed');\n        }\n      }\n    }\n  };\n\n  useImperativeHandle(ref, () => ({\n    init() {\n      setRevealel(document.querySelectorAll('[class*=reveal-]'));\n    }\n  }));  \n\n  useEffect(() => {\n    if (typeof revealEl !== 'undefined' && revealEl.length > 0) {\n      if (!checkComplete()) {\n        window.addEventListener('scroll', handleScroll);\n        window.addEventListener('resize', handleResize);\n      }\n      revealElements();\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [revealEl]);\n\n  const handleListeners = () => {\n    if (!checkComplete()) return;\n    window.removeEventListener('scroll', handleScroll);\n    window.removeEventListener('resize', handleResize);\n  };\n\n  const handleScroll = throttle(() => {\n    handleListeners();\n    revealElements();\n  }, 30);\n\n  const handleResize = throttle(() => {\n    setViewportheight(window.innerHeight);\n  }, 30);\n\n  useEffect(() => {\n    handleListeners();\n    revealElements();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [viewportHeight]);  \n\n  return (\n    <>\n      {props.children()}\n    </>\n  );\n});\n\nScrollReveal.propTypes = {\n  children: PropTypes.func.isRequired\n};\n\nexport default ScrollReveal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}